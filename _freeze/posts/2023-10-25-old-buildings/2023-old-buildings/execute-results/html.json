{
  "hash": "220487582082b17de5594176e1114a49",
  "result": {
    "markdown": "---\ntitle: \"Vilken är Sveriges äldsta byggnad enligt data?\"\nauthor: \"Filip Wästberg\"\ndate: \"2023-10-25\"\ncategories: [GIS]\nimage: dalby-kyrka.jpg\n---\n\n\nI min roll som Data Science-konsult har jag jobbat mycket med utbildning. Jag har hållt allt från introduktionskurser till fördjupningar i specifik metodik och programmering. Som en del i att utveckla sådana kurser är jag alltid på jakt efter nya dataset. I Sverige finns det en uppsjö av olika öppen data. Historiskt har vi väl kanske inte varit så bra på att dela data, även om exempelvis ett initiativet [Sveriges Dataportal](https://www.dataportal.se/sv), som den nya digitaliseringsmyndigheten DIGG ligger bakom, har försökt förbättra det.\n\nI vilket fall, jag gillar kartor och äldre byggnader så jag blev glad när jag snubblade över ett dataset som Länsstyrelsen har, som är ett geopaket över Sveriges Byggnader, Byggnadsminnen och kyrkor. Vad jag kunde se finns det inte än på dataportalen.\n\nI det här inlägget visar jag hur du kan läsa in geopaketet i R och analysera data för att svara på frågan: Vilken är Sveriges äldsta byggnad?\n\nPaket vi använder\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf) ## Geografisk analys\nlibrary(tidyverse) ## Databearbetning och visualisering\nlibrary(DT) ## Enkla tabeller i html\nlibrary(rvest) ## För att \"skrapa\" ner data från hemsidor\n```\n:::\n\n\nVi kan börja med att ladda ner och unzippa filen programmatiskt.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndownload.file(\"https://gis-services.metria.se/raafeed/files/gpc/BU.BuildingsGPKG.zip\",\n              destfile = \"buildingsGPKG.zip\")\n\nunzip(\"BuildingsGPKG.zip\", files = \"BU.Buildings.gpkg\")\n```\n:::\n\n\nMed `st_read()` kan vi läsa in geopaketet.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings <- st_read(\"BU.Buildings.gpkg\") |>\n  st_transform(\"+proj=longlat +datum=WGS84\") # leaflet vill ha WGS84\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `BU_Buildings' from data source \n  `/Users/filip.wastberg/Work/filipwastberg/posts/2023-10-25-old-buildings/BU.Buildings.gpkg' \n  using driver `GPKG'\nSimple feature collection with 13990 features and 5 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 270005 ymin: 6134557 xmax: 916001 ymax: 7610739\nProjected CRS: SWEREF99 TM\n```\n:::\n\n```{.r .cell-code}\nglimpse(buildings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 13,990\nColumns: 6\n$ inspireid                    <chr> \"afec8f53-635b-4b41-8cd2-72408054ecd3\", \"…\n$ sitename                     <chr> \"SJÄLANDERSKA SKOLAN\", \" REHNSTEDTS, MANG…\n$ url                          <chr> \"https://bebyggelseregistret.raa.se/bbr2/…\n$ buildingnaturevalue          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ conditionofconstructionvalue <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ geom                         <POINT [°]> POINT (17.14351 60.67645), POINT (1…\n```\n:::\n:::\n\n\nVi ser att vi fått ner en fil med nästan 14 000 rader (byggnader). Där finns namn på byggnaden och en URL till bebyggelseregistret. Till sist har vi också vår `geom` som kan användas för att visualisera data. Vi kan skapa en första enkel karta över de sex första byggnaderna.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet)\n\nbuildings |> \n  head() |> \n  leaflet() |> \n  addTiles() |> \n  addMarkers(popup = ~sitename)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-c4f5ba698decfb4c08d3\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c4f5ba698decfb4c08d3\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[[60.67645260460372,61.35390230716003,61.35488762231589,61.3549879739349,61.31040980531129,58.05910291973821],[17.14351081341163,16.44578548855482,16.42535006366989,16.42579760512683,16.43573156546648,11.70261323470938],null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},[\"SJÄLANDERSKA SKOLAN\",\" REHNSTEDTS, MANGÅRDSBYGGNAD\",\"RENSHAMMAR, CORPS-DE-LOGI\",\" RENSHAMMAR, FLYGEL\",\"STYFSTORPET, BOSTADSHUS\",\"Fjälebro kvarn; FJÄLEBRO KVARN\"],null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[58.05910291973821,61.3549879739349],\"lng\":[11.70261323470938,17.14351081341163]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nMen om vi går in på bebyggelseregistret så ser vi att det finns massa mer information om byggnaderna. Exempelvis när de är byggda, vilken kommun de ligger i och så vidare. Data är också någorlunda strukturerad vilket gör att vi programmatiskt kan läsa data genom \"scraping\". I R gör vi det med paketet `rvest`\n\nNedan har jag skapat en funktion som tar en URL till bebyggelseregistret, laddar ner data och sparat det som en `data.frame`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_building_data <- function(url){\n  \n  resp <- read_html(url)\n  \n  url_id <- str_extract(url, \"[:digit:]+$\")\n  \n  ## Eftersom data finns i en html tabell använder vi bara html_table()\n  table <- resp |> \n    html_table()\n  \n  ## Vissa tabeller är tomma, dessa fyller vi med NA\n  if(length(table) < 2){\n    df <- tibble::tibble(\n      names = c(\"Namn\",\n                \"Nybyggnadsår\",\n                \"Län\",\n                \"Kommun\",\n                \"Landskap\",\n                \"Socken\",\n                \"Församling\",\n                \"Stift\",\n                \"Adress\",\n                \"Historisk kategori\",\n                \"Nuvarande kategori\"),\n      values = NA,\n      id = url_id\n    )\n  } else {\n    \n    df <- table[[2]]\n    \n    df$id <- url_id\n    \n    colnames(df) <-  c(\"names\", \"values\", \"id\")\n  }\n  \n  df |> \n    tidyr::pivot_wider(\n      names_from = names, values_from = values\n    ) |> \n    janitor::clean_names()\n}\n```\n:::\n\n\nOm vi testar funktionen på den första byggnaden i datasettet får vi ut det här:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_building_data(\"https://bebyggelseregistret.raa.se/bbr2/byggnad/visaBeskrivning.raa?page=beskrivning&visaBeskrivningar=true&byggnadId=21000000969300\") |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1\nColumns: 12\n$ id                 <chr> \"21000000969300\"\n$ namn               <chr> \"SJÄLANDERSKA SKOLAN (akt.)\"\n$ nybyggnadsar       <chr> \"1877 - 1877\"\n$ lan                <chr> \"Gävleborg\"\n$ kommun             <chr> \"Gävle\"\n$ landskap           <chr> \"Gästrikland\"\n$ socken             <chr> \"Gävle\"\n$ forsamling         <chr> \"Gävle församling\"\n$ stift              <chr> \"Uppsala stift\"\n$ adress             <chr> \"Ruddammsgatan 32, Norra Rådmansgatan 14\"\n$ historisk_kategori <chr> \"Utbildning och vetenskap - Skolbyggnad\"\n$ nuvarande_kategori <chr> \"\"\n```\n:::\n:::\n\n\nNu vill vi bara göra det för alla andra byggnader. Det gör vi enkelt med en funktion i R som heter `map_df()`. Kort sagt skapar vi en lista med alla våra URL och \"mappar\" eller itererar vår funktion över varje URL för att få fram vår slutgiltiga `data.frame` .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurls <- pull(buildings, url)\n\nbuilding_data <- map_df(urls, get_building_data)\n```\n:::\n\n\nVi kan nu slå samman vår data från geopaketet med den skrapade datan:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings_complete <- bind_cols(\n  buildings,\n  building_data\n)\n```\n:::\n\n\nUtöver det finns det massa mer jag vill göra för att städa datan. Men för att inte göra det här inlägget för långt eller för tråkigt har jag lagt upp all kod [här](https://gist.github.com/filipwastberg/eb5b22ec75411babb987967c2cd57ac3).\n\nI slutändan får vi en csv-fil som ser ut så här:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings <- read_csv(\"buildings_complete.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 13990 Columns: 23\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (17): inspireid, sitename, url, buildingnaturevalue, namn, nybyggnadsar,...\ndbl  (5): id, byggnadsar_start, byggnadsar_klart, lng, lat\nlgl  (1): conditionofconstructionvalue\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nglimpse(buildings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 13,990\nColumns: 23\n$ inspireid                    <chr> \"afec8f53-635b-4b41-8cd2-72408054ecd3\", \"…\n$ sitename                     <chr> \"Själanderska Skolan\", \"Rehnstedts, Mangå…\n$ url                          <chr> \"https://bebyggelseregistret.raa.se/bbr2/…\n$ buildingnaturevalue          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ conditionofconstructionvalue <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ id                           <dbl> 2.100e+13, 2.100e+13, 2.100e+13, 2.100e+1…\n$ namn                         <chr> \"Själanderska Skolan (Akt.)\", \"Rehnstedts…\n$ nybyggnadsar                 <chr> \"1877 - 1877\", \"1750 - 1800\", \"1764 - 176…\n$ lan                          <chr> \"Gävleborg\", \"Gävleborg\", \"Gävleborg\", \"G…\n$ kommun                       <chr> \"Gävle\", \"Bollnäs\", \"Bollnäs\", \"Bollnäs\",…\n$ landskap                     <chr> \"Gästrikland\", \"Hälsingland\", \"Hälsinglan…\n$ socken                       <chr> \"Gävle\", \"Bollnäs\", \"Bollnäs\", \"Bollnäs\",…\n$ forsamling                   <chr> \"Gävle församling\", \"Bollnäs församling\",…\n$ stift                        <chr> \"Uppsala stift\", \"Uppsala stift\", \"Uppsal…\n$ adress                       <chr> \"Ruddammsgatan 32, Norra Rådmansgatan 14\"…\n$ historisk_kategori           <chr> \"Utbildning och vetenskap - Skolbyggnad\",…\n$ nuvarande_kategori           <chr> NA, NA, NA, NA, NA, \"Jordbruk - Kvarn - V…\n$ ungefarlig_adress            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, \"…\n$ byggnadsar_start             <dbl> 1877, 1750, 1764, 1805, 1810, 1875, 1867,…\n$ byggnadsar_klart             <dbl> 1877, 1800, 1764, 1805, 1820, 1881, 1867,…\n$ lng                          <dbl> 17.14351, 16.44579, 16.42535, 16.42580, 1…\n$ lat                          <dbl> 60.67645, 61.35390, 61.35489, 61.35499, 6…\n$ historisk_kategori_smal      <chr> \"Utbildning\", \"Jordbruk\", \"Slott\", \"Slott…\n```\n:::\n:::\n\n\nVi kan exempelvis visualisera år för byggnadsstart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings_start <- buildings |> \n  group_by(byggnadsar_start) |> \n  count(sort = TRUE) \n\nbuildings_start |> \n  ggplot(aes(byggnadsar_start, n)) +\n  geom_line() +\n  theme_minimal() +\n  labs(\n    title = \"Antal byggnader efter år för byggnadsstart\",\n    x = \"Byggnadsår (start)\",\n    y = \"Antal byggnader\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1 row containing missing values (`geom_line()`).\n```\n:::\n\n::: {.cell-output-display}\n![](2023-old-buildings_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nVi ser att vi har flera byggnader som har byggnadsstart år 1100. Gissningsvis är det här grova uppskattningar snarare än konkreta datum. Vi ser också att vi har en byggnad som har byggnadsstart år 500. Det låter lite märkligt. Vilken byggnad är det?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings |> \n  filter(byggnadsar_start == 500) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1\nColumns: 23\n$ inspireid                    <chr> \"ca548ed7-c5a5-4b41-8f27-5add660f0764\"\n$ sitename                     <chr> \"Domtrapphuset\"\n$ url                          <chr> \"https://bebyggelseregistret.raa.se/bbr2/…\n$ buildingnaturevalue          <chr> NA\n$ conditionofconstructionvalue <lgl> NA\n$ id                           <dbl> 2.14e+13\n$ namn                         <chr> \"Domtrapphuset (Akt.)\"\n$ nybyggnadsar                 <chr> \"0500 - 1500\"\n$ lan                          <chr> \"Uppsala\"\n$ kommun                       <chr> \"Uppsala\"\n$ landskap                     <chr> \"Uppland\"\n$ socken                       <chr> \"Uppsala\"\n$ forsamling                   <chr> \"Uppsala domkyrkoförsamling\"\n$ stift                        <chr> \"Uppsala stift\"\n$ adress                       <chr> NA\n$ historisk_kategori           <chr> \"Bostadsbebyggelse - Bostadshus\\t\\t\\n\\t\\t…\n$ nuvarande_kategori           <chr> NA\n$ ungefarlig_adress            <chr> NA\n$ byggnadsar_start             <dbl> 500\n$ byggnadsar_klart             <dbl> 1500\n$ lng                          <dbl> 17.6351\n$ lat                          <dbl> 59.85828\n$ historisk_kategori_smal      <chr> \"Bostadsbebyggelse\"\n```\n:::\n:::\n\n\nDomtrapphuset i Uppsala uppges alltså ha en byggnadstid från 500 - 1500 vilket verkar lite brett. Om vi filtrerar ut de byggnader som har en lite mer specifik årsbestämning, hur ser det ut då?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings |> \n  filter(byggnadsar_klart - byggnadsar_start < 50) |> \n  arrange(byggnadsar_start) |> \n  select(sitename, nybyggnadsar, lan) |> \n  head() |> \n  datatable()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-fd5eb099a89e8b0eab8b\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-fd5eb099a89e8b0eab8b\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"],[\"Vårdsbergs Kyrka\",\"Högby Kyrka\",\"Kimstads Kyrka\",\"Kättilstads Kyrka\",\"Örberga Kyrka\",\"Hejnum Kyrka\"],[\"1000 - 1000\",\"1000 - 1000 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1100 - 1249 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1871 - 1871 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1871 - 1871\",\"1000 - 1000 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1100 - 1349 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1150 - 1199 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1728 - 1733 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1730 - 1733 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1770 - 1771\",\"1000 - 1000 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1489 - 1489 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1489 - 1489 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1514 - 1514 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1760 - 1760 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1760 - 1760\",\"1000 - 1000 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1100 - 1249 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1100 - 1120 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1100 - 1249\",\"1029 - 1029 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1200 - 1200 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1230 - 1270 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1239 - 1239 \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t1240 - 1259\"],[\"Östergötland\",\"Östergötland\",\"Östergötland\",\"Östergötland\",\"Östergötland\",\"Gotland\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>sitename<\\/th>\\n      <th>nybyggnadsar<\\/th>\\n      <th>lan<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nVi får ut ett antal byggnader i Östergötland som alla har byggnadsstart år 1000. De flesta av dem har dock flera byggnadsår, vilket kan vara en indikation på osäkerhet. Antagligen kan det också vara så att det hittats fornlämningar vid kyrkorna som är runt 1000-talet. Vilket inte är orimligt då den här delen av Sverige var tidigt ute när Sverige blev kristet. Men fornlämning och byggnadsstart är rimligtvis inte samma sak.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings |> \n  filter(byggnadsar_klart - byggnadsar_start < 50 & byggnadsar_start == 1000) |> \n  leaflet() |> \n  addTiles() |> \n  addMarkers(\n    lng = ~lng, lat = ~lat,\n    popup = ~paste0(sitename, \"<br>\", \"Byggnadsår, start: \", byggnadsar_start)\n    )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-d5be6f3369f7d8c65c74\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-d5be6f3369f7d8c65c74\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[[58.40391612462363,58.35043554007332,58.5395723856325,58.09715461447988,58.43460236227293],[15.7516603158025,15.09794318043313,15.97345159886842,15.76985655094317,14.80244438839058],null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},[\"Vårdsbergs Kyrka<br>Byggnadsår, start: 1000\",\"Högby Kyrka<br>Byggnadsår, start: 1000\",\"Kimstads Kyrka<br>Byggnadsår, start: 1000\",\"Kättilstads Kyrka<br>Byggnadsår, start: 1000\",\"Örberga Kyrka<br>Byggnadsår, start: 1000\"],null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[58.09715461447988,58.5395723856325],\"lng\":[14.80244438839058,15.97345159886842]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nEn byggnad som ofta brukar sägas vara den äldsta i Sverige är Dalby Kyrka i Skåne.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbuildings |> \n  filter(str_detect(sitename, \"Dalby Kyrka\") & lan == \"Skåne\") |> \n  leaflet() |> \n  addTiles() |> \n  addMarkers(\n    lng = ~lng, lat = ~lat,\n    popup = ~paste0(sitename, \"<br>\", \"Byggnadsår, start: \", byggnadsar_start)\n    ) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-f2ec0b88be380fad5857\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f2ec0b88be380fad5857\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[55.66434381685644,13.34427776238567,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"Dalby Kyrka<br>Byggnadsår, start: 1060\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[55.66434381685644,55.66434381685644],\"lng\":[13.34427776238567,13.34427776238567]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nMen vad betyder det? Som du frågar får du svar, lärde vi oss på universitetet. Vad menar vi med Sveriges äldsta byggnad?\n\nEller som Stephan Borgehammar uttrycker det i [Borgehammar, S. (2017)](https://portal.research.lu.se/sv/publications/nordens-%C3%A4ldsta-bevarade-byggnad-dalby-kyrkas-v%C3%A4rde-mellan-histori) om Dalby Kyrkas datering.\n\n> Är dateringen till år 1060 korrekt? Vad syftar den på -- kyrkans grundläggning eller dess invigning? Vilka konkurrenter har Dalby kyrka om titeln och vad vet vi om dem? Och vad menar vi med bevarad? Är en tillräckligt stor del av den ursprungliga kyrkan i Dalby bevarad och är den tillräckligt väl bevarad?\n\nDe äldsta spåren av trä i Dalby kyrka har med Kol-14-metoden daterades till mellan 1020 och 1160, ett väldigt brett spann.\n\nSå, för att svara på vilken som är Sveriges äldsta byggnad med hjälp av data behöver vi... bättre data. Till dess får vi kanske gå på lokalhistorikern och läraren Georg Welins uppskattning om att Dalby Kyrka är byggd år 1060, vilket sannolikt gör den till Sveriges äldsta byggnad.\n",
    "supporting": [
      "2023-old-buildings_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-binding-2.1.2/leaflet.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.28/datatables.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}